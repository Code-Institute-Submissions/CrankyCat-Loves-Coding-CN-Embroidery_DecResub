<!-- form to submit quantity and add to cart -->
<form 
    class="form" 
    action="{% url 'add_to_bag' product.id %}" 
    method="POST"
>
{% csrf_token %}

    <!-- Button trigger Quantity modal -->
    <button 
        type="button" 
        class="btn badge-secondary mt-3" 
        data-toggle="modal"
        data-target="#addtocart"
    >
        Add To Cart
    </button>

 
    <!-- Quantity Modal -->
    <div 
        class="modal fade" id="addtocart" 
        tabindex="-1" role="dialog" 
        aria-labelledby="addtocartLabel" aria-hidden="true"
    >
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title text-secondary" id="addtocartLabel">
                        Please enter order quantity:
                    </h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body text-secondary">
                    <p>Quantity:</p>

                    <input 
                        type="number" name="quantity" 
                        value="1" min="1" max="99" 
                        data-item_id="{{ product_id }}"
                        id="id_qty_{{ product_id }}"
                        class="col-4 text-center"
                    >

                </div>
                
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">
                        <a href="{% url 'products' %}" class="text-secondary">Close</a>
                    </button>
                    <input type="submit" value="Add to cart" class="btn badge-secondary">
                    <input type="hidden" name="redirect_url" value="{{ request.path }}">
                </div>
            </div>
        </div>
    </div>

</form>